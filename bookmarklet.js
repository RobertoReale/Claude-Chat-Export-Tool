javascript:!!function(){function e(e,t){return t.every(t=>e.classList.contains(t))}function t(e,n=0){if(!e)return"";const o=e.tagName?.toLowerCase();if(e.nodeType===Node.TEXT_NODE)return e.textContent||"";if(["script","style","noscript"].includes(o))return"";if("pre"===o&&e.querySelector("code")){const t=e.querySelector("code"),n=t.textContent||"",o=function(e){let t=e.parentElement;for(;t;){const e=(t.textContent||"").match(/\b(javascript|python|java|cpp|c\+\+|html|css|sql|bash|shell|json|xml|yaml|markdown|php|ruby|go|rust|typescript|swift|kotlin)\b/i);if(e)return e[1].toLowerCase();t=t.parentElement}const n=e.textContent||"";return n.includes("function")&&n.includes("{")?"javascript":n.includes("def ")&&n.includes(":")?"python":n.includes("public class")||n.includes("import java.")?"java":n.includes("<?php")?"php":n.includes("<html")||n.includes("<!DOCTYPE")?"html":n.includes("SELECT")&&n.includes("FROM")?"sql":n.includes("#!/bin/bash")||n.includes("echo ")?"bash":""}(t);return`\n\`\`\`${o}\n${n}\n\`\`\`\n`}if("code"===o&&"PRE"!==e.parentElement?.tagName)return`\`${e.textContent||""}\``;if("math"===o||e.classList.contains("katex")||e.classList.contains("MathJax"))return function(e){if("MATH"===e.tagName){const t=e.textContent||"";return"block"===e.getAttribute("display")||e.classList.contains("math-display")?`$$${t}$$`:`$${t}$`}if(e.classList.contains("katex")||e.classList.contains("MathJax"))return`$${e.textContent||""}$`;return e.textContent||""}(e);if("br"===o)return"\n";if("p"===o){const o=Array.from(e.childNodes).map(e=>t(e,n+1)).join("");return o?`${o}\n\n`:""}if("ul"===o||"ol"===o){const r=Array.from(e.children).filter(e=>"LI"===e.tagName).map((e,r)=>`${"ul"===o?"-":`${r+1}.`} ${t(e,n+1).trim()}`).join("\n");return r?`${r}\n\n`:""}if(["h1","h2","h3","h4","h5","h6"].includes(o)){const r=parseInt(o[1]),l=Array.from(e.childNodes).map(e=>t(e,n+1)).join("");return`${"#".repeat(r)} ${l.trim()}\n\n`}if("strong"===o||"b"===o){return`**${Array.from(e.childNodes).map(e=>t(e,n+1)).join("")}**`}if("em"===o||"i"===o){return`*${Array.from(e.childNodes).map(e=>t(e,n+1)).join("")}*`}if("a"===o){const o=e.getAttribute("href"),r=Array.from(e.childNodes).map(e=>t(e,n+1)).join("");return o?`[${r}](${o})`:r}if("blockquote"===o){return Array.from(e.childNodes).map(e=>t(e,n+1)).join("").split("\n").map(e=>e.trim()?`> ${e}`:">").join("\n")+"\n\n"}return Array.from(e.childNodes).map(e=>t(e,n+1)).join("")}function n(e,n){let o;if(n){if(o=e.querySelector("div.flex.flex-row.gap-2"),o){const e=o.querySelectorAll("div, p, span");let t=o,n=0;e.forEach(e=>{const o=e.textContent?.trim()||"";o.length>3&&!o.match(/^[A-Z]{1,3}$/)&&o.length>n&&(n=o.length,t=e)}),n>0&&(o=t)}}else o=e.querySelector("div.font-claude-message");o||(o=e.querySelector('[class*="message"]')||e.querySelector("div > div:last-child")||e);let r=t(o).trim();return n&&(r=function(e){return(e=(e=(e=e.replace(/^[A-Z]{1,3}\s+/,"")).replace(/^[A-Z]\s+/,"")).replace(/^(User:|Claude:)\s*/i,"")).trim()}(r)),r.replace(/\n{3,}/g,"\n\n")}!function(){console.log("üöÄ Claude Chat Export Tool Starting...");const t=function(){console.log("üîç Starting Claude chat extraction...");const t=[],o=document.querySelectorAll("div");console.log(`üìù Found ${o.length} div elements to analyze`);for(const r of o)if(e(r,["group","relative","inline-flex","bg-bg-300"])){const e=n(r,!0);e&&(t.push({type:"user",content:e,element:r}),console.log("üë§ Found user message"))}else if(e(r,["group","relative","-tracking-[0.015em]"])){const e=n(r,!1);e&&(t.push({type:"claude",content:e,element:r}),console.log("ü§ñ Found Claude message"))}return console.log(`‚úÖ Extracted ${t.length} messages total`),0===t.length?(console.warn("‚ö†Ô∏è No messages found. The page structure might have changed."),null):(t.sort((e,t)=>e.element.compareDocumentPosition(t.element)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1),t.map(e=>`${"user"===e.type?"**User:**":"**Claude:**"} ${e.content}`).join("\n\n---\n\n"))}();t?(console.log("üìÑ Generated markdown:",t.length,"characters"),function(e){const t=new Blob([e],{type:"text/markdown"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=`claude-chat-${(new Date).toISOString().slice(0,19).replace(/:/g,"-")}.md`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)}(t),console.log("üéâ Export complete!"),alert("‚úÖ Conversation exported successfully!")):alert("‚ùå No conversation found. Make sure you're on a Claude chat page.")}()}();
