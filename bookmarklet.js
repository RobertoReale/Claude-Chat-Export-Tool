javascript:(function()%7B%2F**%0A%20*%20Claude%20Chat%20Export%20Tool%0A%20*%20Extracts%20full%20conversation%20from%20Claude%20AI%20chat%20page%20and%20formats%20as%20Markdown%0A%20*%20Can%20be%20executed%20in%20browser%20console%20or%20saved%20as%20bookmarklet%0A%20*%2F%0A%0A(function()%20%7B%0A%20%20%20%20'use%20strict'%3B%0A%20%20%20%20%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Checks%20if%20an%20element%20contains%20all%20specified%20class%20names%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20hasAllClasses(element%2C%20classNames)%20%7B%0A%20%20%20%20%20%20%20%20return%20classNames.every(className%20%3D%3E%20element.classList.contains(className))%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Detects%20programming%20language%20from%20code%20block%20context%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20detectCodeLanguage(codeElement)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Look%20for%20language%20indicators%20in%20parent%20elements%20or%20siblings%0A%20%20%20%20%20%20%20%20let%20parent%20%3D%20codeElement.parentElement%3B%0A%20%20%20%20%20%20%20%20while%20(parent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20text%20%3D%20parent.textContent%20%7C%7C%20''%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20langMatch%20%3D%20text.match(%2F%5Cb(javascript%7Cpython%7Cjava%7Ccpp%7Cc%5C%2B%5C%2B%7Chtml%7Ccss%7Csql%7Cbash%7Cshell%7Cjson%7Cxml%7Cyaml%7Cmarkdown%7Cphp%7Cruby%7Cgo%7Crust%7Ctypescript%7Cswift%7Ckotlin)%5Cb%2Fi)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(langMatch)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20langMatch%5B1%5D.toLowerCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%20%3D%20parent.parentElement%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Look%20for%20common%20patterns%20in%20the%20code%20itself%0A%20%20%20%20%20%20%20%20const%20code%20%3D%20codeElement.textContent%20%7C%7C%20''%3B%0A%20%20%20%20%20%20%20%20if%20(code.includes('function')%20%26%26%20code.includes('%7B'))%20return%20'javascript'%3B%0A%20%20%20%20%20%20%20%20if%20(code.includes('def%20')%20%26%26%20code.includes('%3A'))%20return%20'python'%3B%0A%20%20%20%20%20%20%20%20if%20(code.includes('public%20class')%20%7C%7C%20code.includes('import%20java.'))%20return%20'java'%3B%0A%20%20%20%20%20%20%20%20if%20(code.includes('%3C%3Fphp'))%20return%20'php'%3B%0A%20%20%20%20%20%20%20%20if%20(code.includes('%3Chtml')%20%7C%7C%20code.includes('%3C!DOCTYPE'))%20return%20'html'%3B%0A%20%20%20%20%20%20%20%20if%20(code.includes('SELECT')%20%26%26%20code.includes('FROM'))%20return%20'sql'%3B%0A%20%20%20%20%20%20%20%20if%20(code.includes('%23!%2Fbin%2Fbash')%20%7C%7C%20code.includes('echo%20'))%20return%20'bash'%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20''%3B%20%2F%2F%20No%20language%20detected%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Processes%20mathematical%20expressions%20and%20converts%20to%20markdown-friendly%20format%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20processMathContent(mathElement)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20MathML%0A%20%20%20%20%20%20%20%20if%20(mathElement.tagName%20%3D%3D%3D%20'MATH')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20mathText%20%3D%20mathElement.textContent%20%7C%7C%20''%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wrap%20in%20dollar%20signs%20for%20inline%20math%20or%20double%20dollar%20signs%20for%20block%20math%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20isBlock%20%3D%20mathElement.getAttribute('display')%20%3D%3D%3D%20'block'%20%7C%7C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mathElement.classList.contains('math-display')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20isBlock%20%3F%20%60%24%24%24%7BmathText%7D%24%24%60%20%3A%20%60%24%24%7BmathText%7D%24%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20other%20math%20rendering%20(KaTeX%2C%20MathJax%2C%20etc.)%0A%20%20%20%20%20%20%20%20if%20(mathElement.classList.contains('katex')%20%7C%7C%20mathElement.classList.contains('MathJax'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20mathText%20%3D%20mathElement.textContent%20%7C%7C%20''%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%60%24%24%7BmathText%7D%24%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20mathElement.textContent%20%7C%7C%20''%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Recursively%20processes%20DOM%20elements%20and%20converts%20to%20markdown%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20processElement(element%2C%20depth%20%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!element)%20return%20''%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20tagName%20%3D%20element.tagName%3F.toLowerCase()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20text%20nodes%0A%20%20%20%20%20%20%20%20if%20(element.nodeType%20%3D%3D%3D%20Node.TEXT_NODE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20element.textContent%20%7C%7C%20''%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Skip%20script%2C%20style%2C%20and%20other%20non-content%20elements%0A%20%20%20%20%20%20%20%20if%20(%5B'script'%2C%20'style'%2C%20'noscript'%5D.includes(tagName))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20''%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20code%20blocks%0A%20%20%20%20%20%20%20%20if%20(tagName%20%3D%3D%3D%20'pre'%20%26%26%20element.querySelector('code'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20codeElement%20%3D%20element.querySelector('code')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20code%20%3D%20codeElement.textContent%20%7C%7C%20''%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20language%20%3D%20detectCodeLanguage(codeElement)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%60%5Cn%5C%60%5C%60%5C%60%24%7Blanguage%7D%5Cn%24%7Bcode%7D%5Cn%5C%60%5C%60%5C%60%5Cn%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20inline%20code%0A%20%20%20%20%20%20%20%20if%20(tagName%20%3D%3D%3D%20'code'%20%26%26%20element.parentElement%3F.tagName%20!%3D%3D%20'PRE')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%60%5C%60%24%7Belement.textContent%20%7C%7C%20''%7D%5C%60%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20mathematical%20expressions%0A%20%20%20%20%20%20%20%20if%20(tagName%20%3D%3D%3D%20'math'%20%7C%7C%20element.classList.contains('katex')%20%7C%7C%20element.classList.contains('MathJax'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processMathContent(element)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20line%20breaks%0A%20%20%20%20%20%20%20%20if%20(tagName%20%3D%3D%3D%20'br')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20'%5Cn'%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20paragraphs%0A%20%20%20%20%20%20%20%20if%20(tagName%20%3D%3D%3D%20'p')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20content%20%3D%20Array.from(element.childNodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map(child%20%3D%3E%20processElement(child%2C%20depth%20%2B%201))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.join('')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20content%20%3F%20%60%24%7Bcontent%7D%5Cn%5Cn%60%20%3A%20''%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20lists%0A%20%20%20%20%20%20%20%20if%20(tagName%20%3D%3D%3D%20'ul'%20%7C%7C%20tagName%20%3D%3D%3D%20'ol')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20items%20%3D%20Array.from(element.children)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.filter(child%20%3D%3E%20child.tagName%20%3D%3D%3D%20'LI')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map((li%2C%20index)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20bullet%20%3D%20tagName%20%3D%3D%3D%20'ul'%20%3F%20'-'%20%3A%20%60%24%7Bindex%20%2B%201%7D.%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20content%20%3D%20processElement(li%2C%20depth%20%2B%201).trim()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%60%24%7Bbullet%7D%20%24%7Bcontent%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.join('%5Cn')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20items%20%3F%20%60%24%7Bitems%7D%5Cn%5Cn%60%20%3A%20''%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20headings%0A%20%20%20%20%20%20%20%20if%20(%5B'h1'%2C%20'h2'%2C%20'h3'%2C%20'h4'%2C%20'h5'%2C%20'h6'%5D.includes(tagName))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20level%20%3D%20parseInt(tagName%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20content%20%3D%20Array.from(element.childNodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map(child%20%3D%3E%20processElement(child%2C%20depth%20%2B%201))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.join('')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%60%24%7B'%23'.repeat(level)%7D%20%24%7Bcontent.trim()%7D%5Cn%5Cn%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20emphasis%0A%20%20%20%20%20%20%20%20if%20(tagName%20%3D%3D%3D%20'strong'%20%7C%7C%20tagName%20%3D%3D%3D%20'b')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20content%20%3D%20Array.from(element.childNodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map(child%20%3D%3E%20processElement(child%2C%20depth%20%2B%201))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.join('')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%60**%24%7Bcontent%7D**%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(tagName%20%3D%3D%3D%20'em'%20%7C%7C%20tagName%20%3D%3D%3D%20'i')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20content%20%3D%20Array.from(element.childNodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map(child%20%3D%3E%20processElement(child%2C%20depth%20%2B%201))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.join('')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%60*%24%7Bcontent%7D*%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20links%0A%20%20%20%20%20%20%20%20if%20(tagName%20%3D%3D%3D%20'a')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20href%20%3D%20element.getAttribute('href')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20content%20%3D%20Array.from(element.childNodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map(child%20%3D%3E%20processElement(child%2C%20depth%20%2B%201))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.join('')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20href%20%3F%20%60%5B%24%7Bcontent%7D%5D(%24%7Bhref%7D)%60%20%3A%20content%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20blockquotes%0A%20%20%20%20%20%20%20%20if%20(tagName%20%3D%3D%3D%20'blockquote')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20content%20%3D%20Array.from(element.childNodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map(child%20%3D%3E%20processElement(child%2C%20depth%20%2B%201))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.join('')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20content.split('%5Cn')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map(line%20%3D%3E%20line.trim()%20%3F%20%60%3E%20%24%7Bline%7D%60%20%3A%20'%3E')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.join('%5Cn')%20%2B%20'%5Cn%5Cn'%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Default%3A%20process%20children%0A%20%20%20%20%20%20%20%20return%20Array.from(element.childNodes)%0A%20%20%20%20%20%20%20%20%20%20%20%20.map(child%20%3D%3E%20processElement(child%2C%20depth%20%2B%201))%0A%20%20%20%20%20%20%20%20%20%20%20%20.join('')%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Cleans%20up%20user%20message%20content%20to%20remove%20profile%20initials%20and%20other%20UI%20elements%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20cleanUserMessage(content)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Remove%20profile%20initials%20(1-3%20capital%20letters%20at%20the%20start)%0A%20%20%20%20%20%20%20%20content%20%3D%20content.replace(%2F%5E%5BA-Z%5D%7B1%2C3%7D%5Cs%2B%2F%2C%20'')%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Remove%20any%20standalone%20capital%20letters%20at%20the%20beginning%0A%20%20%20%20%20%20%20%20content%20%3D%20content.replace(%2F%5E%5BA-Z%5D%5Cs%2B%2F%2C%20'')%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Remove%20common%20UI%20elements%20that%20might%20leak%20in%0A%20%20%20%20%20%20%20%20content%20%3D%20content.replace(%2F%5E(User%3A%7CClaude%3A)%5Cs*%2Fi%2C%20'')%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Clean%20up%20any%20remaining%20whitespace%20issues%0A%20%20%20%20%20%20%20%20content%20%3D%20content.trim()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20content%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Extracts%20content%20from%20a%20message%20container%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20extractMessageContent(messageContainer%2C%20isUserMessage)%20%7B%0A%20%20%20%20%20%20%20%20let%20contentDiv%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(isUserMessage)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20For%20user%20messages%2C%20look%20for%20div%20with%20class%20%22flex%20flex-row%20gap-2%22%0A%20%20%20%20%20%20%20%20%20%20%20%20contentDiv%20%3D%20messageContainer.querySelector('div.flex.flex-row.gap-2')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Try%20to%20find%20the%20actual%20message%20content%2C%20avoiding%20avatar%2Fprofile%20areas%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(contentDiv)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Look%20for%20the%20text%20content%20area%2C%20usually%20the%20last%20or%20largest%20text%20container%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20textContainers%20%3D%20contentDiv.querySelectorAll('div%2C%20p%2C%20span')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20bestContainer%20%3D%20contentDiv%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20maxLength%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Find%20the%20container%20with%20the%20most%20text%20(likely%20the%20actual%20message)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20textContainers.forEach(container%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20text%20%3D%20container.textContent%3F.trim()%20%7C%7C%20''%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Ignore%20containers%20that%20are%20just%201-3%20capital%20letters%20(profile%20initials)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(text.length%20%3E%203%20%26%26%20!text.match(%2F%5E%5BA-Z%5D%7B1%2C3%7D%24%2F))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(text.length%20%3E%20maxLength)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxLength%20%3D%20text.length%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bestContainer%20%3D%20container%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(maxLength%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20contentDiv%20%3D%20bestContainer%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20For%20Claude%20messages%2C%20look%20for%20div%20with%20class%20%22font-claude-message%22%0A%20%20%20%20%20%20%20%20%20%20%20%20contentDiv%20%3D%20messageContainer.querySelector('div.font-claude-message')%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(!contentDiv)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Fallback%3A%20try%20to%20find%20the%20main%20content%20area%0A%20%20%20%20%20%20%20%20%20%20%20%20contentDiv%20%3D%20messageContainer.querySelector('%5Bclass*%3D%22message%22%5D')%20%7C%7C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20messageContainer.querySelector('div%20%3E%20div%3Alast-child')%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20messageContainer%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20the%20content%20and%20convert%20to%20markdown%0A%20%20%20%20%20%20%20%20let%20content%20%3D%20processElement(contentDiv).trim()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Clean%20up%20user%20messages%20specifically%0A%20%20%20%20%20%20%20%20if%20(isUserMessage)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20content%20%3D%20cleanUserMessage(content)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Clean%20up%20excessive%20newlines%0A%20%20%20%20%20%20%20%20return%20content.replace(%2F%5Cn%7B3%2C%7D%2Fg%2C%20'%5Cn%5Cn')%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Main%20function%20to%20extract%20the%20conversation%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20extractConversation()%20%7B%0A%20%20%20%20%20%20%20%20console.log('%F0%9F%94%8D%20Starting%20Claude%20chat%20extraction...')%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20messages%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Find%20all%20potential%20message%20containers%0A%20%20%20%20%20%20%20%20const%20allDivs%20%3D%20document.querySelectorAll('div')%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20console.log(%60%F0%9F%93%9D%20Found%20%24%7BallDivs.length%7D%20div%20elements%20to%20analyze%60)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20(const%20div%20of%20allDivs)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20it's%20a%20user%20message%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(hasAllClasses(div%2C%20%5B'group'%2C%20'relative'%2C%20'inline-flex'%2C%20'bg-bg-300'%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20content%20%3D%20extractMessageContent(div%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(content)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20messages.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20'user'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20content%3A%20content%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element%3A%20div%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('%F0%9F%91%A4%20Found%20user%20message')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20it's%20a%20Claude%20message%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(hasAllClasses(div%2C%20%5B'group'%2C%20'relative'%2C%20'-tracking-%5B0.015em%5D'%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20content%20%3D%20extractMessageContent(div%2C%20false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(content)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20messages.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20'claude'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20content%3A%20content%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element%3A%20div%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('%F0%9F%A4%96%20Found%20Claude%20message')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20console.log(%60%E2%9C%85%20Extracted%20%24%7Bmessages.length%7D%20messages%20total%60)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(messages.length%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.warn('%E2%9A%A0%EF%B8%8F%20No%20messages%20found.%20The%20page%20structure%20might%20have%20changed.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Sort%20messages%20by%20DOM%20order%0A%20%20%20%20%20%20%20%20messages.sort((a%2C%20b)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20position%20%3D%20a.element.compareDocumentPosition(b.element)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20position%20%26%20Node.DOCUMENT_POSITION_FOLLOWING%20%3F%20-1%20%3A%201%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Generate%20markdown%0A%20%20%20%20%20%20%20%20const%20markdown%20%3D%20messages.map(msg%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20prefix%20%3D%20msg.type%20%3D%3D%3D%20'user'%20%3F%20'**User%3A**'%20%3A%20'**Claude%3A**'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%60%24%7Bprefix%7D%20%24%7Bmsg.content%7D%60%3B%0A%20%20%20%20%20%20%20%20%7D).join('%5Cn%5Cn---%5Cn%5Cn')%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20markdown%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Downloads%20the%20markdown%20as%20a%20file%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20downloadMarkdown(markdown)%20%7B%0A%20%20%20%20%20%20%20%20const%20blob%20%3D%20new%20Blob(%5Bmarkdown%5D%2C%20%7B%20type%3A%20'text%2Fmarkdown'%20%7D)%3B%0A%20%20%20%20%20%20%20%20const%20url%20%3D%20URL.createObjectURL(blob)%3B%0A%20%20%20%20%20%20%20%20const%20a%20%3D%20document.createElement('a')%3B%0A%20%20%20%20%20%20%20%20a.href%20%3D%20url%3B%0A%20%20%20%20%20%20%20%20a.download%20%3D%20%60claude-chat-%24%7Bnew%20Date().toISOString().slice(0%2C%2019).replace(%2F%3A%2Fg%2C%20'-')%7D.md%60%3B%0A%20%20%20%20%20%20%20%20document.body.appendChild(a)%3B%0A%20%20%20%20%20%20%20%20a.click()%3B%0A%20%20%20%20%20%20%20%20document.body.removeChild(a)%3B%0A%20%20%20%20%20%20%20%20URL.revokeObjectURL(url)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Main%20execution%20function%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20main()%20%7B%0A%20%20%20%20%20%20%20%20console.log('%F0%9F%9A%80%20Claude%20Chat%20Export%20Tool%20Starting...')%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20markdown%20%3D%20extractConversation()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(!markdown)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert('%E2%9D%8C%20No%20conversation%20found.%20Make%20sure%20you%5C're%20on%20a%20Claude%20chat%20page.')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20console.log('%F0%9F%93%84%20Generated%20markdown%3A'%2C%20markdown.length%2C%20'characters')%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Download%20as%20file%0A%20%20%20%20%20%20%20%20downloadMarkdown(markdown)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20console.log('%F0%9F%8E%89%20Export%20complete!')%3B%0A%20%20%20%20%20%20%20%20alert('%E2%9C%85%20Conversation%20exported%20successfully!')%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Execute%20the%20main%20function%0A%20%20%20%20main()%3B%0A%20%20%20%20%0A%7D)()%3B%7D)()%3B
